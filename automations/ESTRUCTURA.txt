================================================================================
  SISTEMA DE AUTOMATIZACIONES HOTBOAT - ESTRUCTURA DEL PROYECTO
================================================================================

ğŸ“ hotboat-whatsapp/
â”‚
â”œâ”€â”€ ğŸ“ automations/                      â† NUEVA CARPETA DE AUTOMATIZACIONES
â”‚   â”‚
â”‚   â”œâ”€â”€ __init__.py                      InicializaciÃ³n del mÃ³dulo
â”‚   â”œâ”€â”€ config.yaml                      âš™ï¸ ConfiguraciÃ³n de monitores
â”‚   â”œâ”€â”€ database.py                      ğŸ—„ï¸ Utilidades de base de datos
â”‚   â”œâ”€â”€ notifications.py                 ğŸ“± Sistema de notificaciones WhatsApp
â”‚   â”œâ”€â”€ setup_inventory.sql              ğŸ“¦ Script SQL para crear tabla inventory
â”‚   â”œâ”€â”€ README.md                        ğŸ“š DocumentaciÃ³n completa
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ monitors/                     Monitores del sistema
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ base_monitor.py              Clase base para monitores
â”‚       â”œâ”€â”€ appointments_monitor.py      ğŸ“… Monitor de reservas
â”‚       â””â”€â”€ stock_monitor.py             ğŸ“¦ Monitor de inventario
â”‚
â”œâ”€â”€ run_automations.py                   â–¶ï¸ Script principal para ejecutar
â”œâ”€â”€ test_automations.py                  ğŸ§ª Script de prueba
â”œâ”€â”€ AUTOMATIONS_QUICKSTART.md            ğŸš€ GuÃ­a rÃ¡pida de inicio
â”‚
â”œâ”€â”€ ğŸ“ app/                              AplicaciÃ³n principal (sin cambios)
â”‚   â”œâ”€â”€ config.py                        âœï¸ MODIFICADO: +automation_phone_numbers
â”‚   â”œâ”€â”€ whatsapp/
â”‚   â”‚   â””â”€â”€ client.py                    â™»ï¸ Reutilizado por automations
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ .env                                 âœï¸ AGREGAR: AUTOMATION_PHONE_NUMBERS
â”œâ”€â”€ env.example                          âœï¸ MODIFICADO: +ejemplo de config
â””â”€â”€ requirements.txt                     âœï¸ MODIFICADO: +pyyaml

================================================================================
  Â¿QUÃ‰ HACE CADA ARCHIVO?
================================================================================

ğŸ“„ run_automations.py
   â†’ Script principal que ejecuta el sistema de automatizaciones
   â†’ Usa: python run_automations.py

ğŸ“„ test_automations.py
   â†’ Verifica que todo estÃ© configurado correctamente
   â†’ Usa: python test_automations.py

ğŸ“„ automations/config.yaml
   â†’ ConfiguraciÃ³n de:
     â€¢ Intervalos de revisiÃ³n (cada cuÃ¡ntos segundos revisar)
     â€¢ Umbrales de stock (cuÃ¡ndo alertar)
     â€¢ Prioridades de notificaciones

ğŸ“„ automations/notifications.py
   â†’ EnvÃ­a mensajes por WhatsApp
   â†’ Reutiliza el WhatsAppClient existente del proyecto
   â†’ Soporta mÃºltiples nÃºmeros de destinatarios

ğŸ“„ automations/database.py
   â†’ Funciones para consultar la base de datos
   â†’ Reutiliza la conexiÃ³n existente del proyecto

ğŸ“„ automations/monitors/appointments_monitor.py
   â†’ Monitorea la tabla appointments
   â†’ Detecta: nuevas reservas, cancelaciones, modificaciones

ğŸ“„ automations/monitors/stock_monitor.py
   â†’ Monitorea la tabla inventory
   â†’ Detecta: stock bajo, crÃ­tico, sin stock, reposiciÃ³n

================================================================================
  FLUJO DE FUNCIONAMIENTO
================================================================================

1. Ejecutas: python run_automations.py

2. El sistema:
   âœ“ Se conecta a la base de datos
   âœ“ Inicializa los monitores configurados
   âœ“ Te envÃ­a un mensaje de confirmaciÃ³n por WhatsApp

3. Cada monitor:
   âœ“ Revisa la base de datos cada X segundos (configurable)
   âœ“ Compara con el estado anterior
   âœ“ Si detecta cambios, te envÃ­a notificaciÃ³n por WhatsApp

4. TÃº recibes en tu WhatsApp:
   ğŸ“± "ğŸ‰ Nueva Reserva Creada"
   ğŸ“± "ğŸ”„ Reserva Modificada"
   ğŸ“± "ğŸŸ¡ Stock Bajo"
   ğŸ“± etc.

================================================================================
  ARCHIVOS QUE MODIFICASTE
================================================================================

âœï¸ app/config.py
   + Agregaste: automation_phone_numbers: str = ""

âœï¸ env.example
   + Agregaste: AUTOMATION_PHONE_NUMBERS=

âœï¸ requirements.txt
   + Agregaste: pyyaml==6.0.1

âœï¸ .env (tu archivo personal)
   + Debes agregar: AUTOMATION_PHONE_NUMBERS=56912345678

================================================================================
  ARCHIVOS NUEVOS
================================================================================

âœ… automations/                          (toda la carpeta)
âœ… run_automations.py
âœ… test_automations.py
âœ… AUTOMATIONS_QUICKSTART.md

================================================================================
  VENTAJAS DE ESTA ESTRUCTURA
================================================================================

âœ¨ Todo en un solo repositorio
âœ¨ Usa la misma configuraciÃ³n de WhatsApp que ya tienes
âœ¨ Usa la misma conexiÃ³n a base de datos
âœ¨ No necesitas configurar tokens adicionales
âœ¨ Se ejecuta independientemente del bot principal
âœ¨ Puedes correr ambos al mismo tiempo
âœ¨ FÃ¡cil de extender con nuevos monitores

================================================================================
  PRÃ“XIMOS PASOS
================================================================================

1. Edita .env y agrega:
   AUTOMATION_PHONE_NUMBERS=56912345678

2. Instala dependencia:
   pip install pyyaml

3. Prueba la configuraciÃ³n:
   python test_automations.py

4. Ejecuta el sistema:
   python run_automations.py

5. Prueba creando una reserva en la base de datos
   (Ver ejemplos en AUTOMATIONS_QUICKSTART.md)

================================================================================

